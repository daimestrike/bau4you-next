# Объединенная система проектов и тендеров

## Обзор изменений

Проекты и тендеры теперь объединены в единую систему. **Проекты** стали основной сущностью, а страница **Тендеры** теперь отображает активные проекты.

## Ключевые изменения

### 1. Страница тендеров (`/tenders`)
- **Теперь показывает проекты** вместо тендеров
- Отображает только проекты со статусом `planning` и `active`
- Сохранены все фильтры (категория, местоположение, бюджет)
- Обновлен заголовок: "Проекты и тендеры"

### 2. Навигация и быстрые действия
- **Header**: Убрана ссылка "Создать тендер", оставлена "Новый проект"
- **Подрядчики**: "Найти тендеры" → "Найти проекты"
- **Дашборды**: Обновлены ссылки и названия

### 3. Поля проектов
- **Deadline**: Поле срока выполнения уже присутствует в формах
- **Создание проекта**: Форма содержит поле "Планируемое завершение"
- **Редактирование**: Форма содержит поле "Срок выполнения"

## Структура данных

### Таблица `projects`
```sql
CREATE TABLE projects (
  id UUID PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT,
  location TEXT,
  region_id UUID REFERENCES regions(id),
  city_id UUID REFERENCES cities(id),
  budget DECIMAL,
  deadline DATE,  -- Срок выполнения
  status TEXT CHECK (status IN ('planning', 'active', 'completed', 'on_hold')),
  materials_list JSONB,
  company_requirements JSONB,
  owner_id UUID REFERENCES auth.users(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

## Пользовательский интерфейс

### Страница тендеров (`/tenders`)
- **Фильтры**: Категория, местоположение, бюджет от/до
- **Карточки проектов**: Название, описание, бюджет, срок, местоположение, статус
- **Ссылки**: Ведут на страницы проектов (`/projects/[id]`)

### Формы проектов
- **Создание** (`/projects/create`): Многошаговая форма с полем deadline
- **Редактирование** (`/projects/[id]/edit`): Простая форма с полем deadline

## Логика отображения

### Статусы проектов
- `planning` - Планирование (желтый)
- `active` - В работе (синий)
- `completed` - Завершен (зеленый)
- `on_hold` - Приостановлен (серый)

### Фильтрация на странице тендеров
```javascript
// Показываем только активные проекты
.in('status', ['planning', 'active'])
```

## Роли пользователей

### Заказчики (clients)
- Создают проекты через `/projects/create`
- Управляют своими проектами
- Получают предложения от подрядчиков

### Подрядчики (contractors)
- Просматривают проекты на `/tenders`
- Отправляют предложения через "Отправить предложение"
- Видят рекомендованные проекты в дашборде

### Поставщики (suppliers)
- Могут просматривать проекты для поиска потенциальных клиентов
- Управляют своими товарами

## Интеграция с существующими функциями

### Система предложений
- Подрядчики отправляют предложения через `project_applications`
- Уведомления создаются в таблице `notifications`
- Владельцы проектов видят предложения в дашборде

### Поиск
- Страница поиска (`/search`) включает проекты
- Семантический поиск по названию и описанию

### Дашборды
- **ClientDashboard**: Показывает статистику проектов
- **ContractorDashboard**: Показывает доступные проекты и заявки
- **SupplierDashboard**: Интеграция с проектами для поиска клиентов

## Миграция данных

Существующие тендеры остаются в таблице `tenders`, но основной функционал переведен на проекты. При необходимости можно создать миграцию для переноса данных из `tenders` в `projects`.

## Тестирование

Все основные страницы протестированы:
- ✅ `/tenders` - отображает проекты
- ✅ `/projects` - работает как прежде
- ✅ `/projects/create` - форма с полем deadline
- ✅ `/dashboard` - обновленные ссылки
- ✅ `/search` - включает проекты

## Дополнительные изменения

### Навигация
- **Убрана вкладка "Проекты"** из основной навигации Header
- Доступ к проектам теперь через дашборд

### Категории проектов
Обновлены категории в формах и фильтрах:
- Строительство домов
- Ремонт квартир
- Коммерческое строительство
- Ландшафтный дизайн
- Дорожные работы
- Инженерные системы
- **Промышленность** (новая)
- **Коммерческая недвижимость** (новая)
- **Частное строительство** (новая)
- Другое

### Дашборд
- **Добавлена кнопка "Просмотреть все"** в секции "Мои последние проекты и тендеры"
- Кнопка ведет на страницу `/projects` с заголовком "Ваши проекты и тендеры"

## Следующие шаги

1. **Миграция данных**: При необходимости перенести существующие тендеры в проекты
2. **Удаление старых страниц**: Удалить неиспользуемые страницы тендеров
3. **Обновление документации**: Обновить пользовательскую документацию
4. **Тестирование**: Провести полное тестирование с реальными пользователями 