# Настройка функциональности Partnerships

Для полной работы функциональности partnerships необходимо выполнить следующие шаги:

## 1. Создание таблицы company_followers

Выполните SQL-скрипт из файла `database/create_company_followers.sql` в вашей базе данных Supabase:

1. Откройте Supabase Dashboard
2. Перейдите в раздел "SQL Editor"
3. Скопируйте и выполните содержимое файла `database/create_company_followers.sql`

## 2. Функциональность

После создания таблицы будут доступны следующие возможности:

### Страница Partnerships (`/partnerships`)
- Просмотр всех компаний, на которые подписан пользователь
- Кнопка "Написать письмо" - открывает почтовый клиент с предзаполненным письмом
- Кнопка "Пригласить в проект" - позволяет выбрать проект и отправить приглашение
- Кнопка отписки от компании
- Переход в профиль компании

### Профиль компании (`/companies/[id]`)
- Кнопка "Подписаться"/"Отписаться" теперь работает с базой данных
- Статус подписки сохраняется и отображается корректно

### Функции в Supabase
- `followCompany(companyId)` - подписка на компанию
- `unfollowCompany(companyId)` - отписка от компании
- `getFollowedCompanies(userId)` - получение списка подписок пользователя
- `isFollowingCompany(companyId)` - проверка статуса подписки
- `getUserProjects(userId)` - получение проектов пользователя для приглашений

## 3. Безопасность

Таблица `company_followers` защищена политиками RLS (Row Level Security):
- Пользователи видят только свои подписки
- Владельцы компаний могут видеть подписчиков своих компаний
- Пользователи могут управлять только своими подписками

## 4. Использование

### Подписка на компанию
1. Перейдите в профиль любой компании
2. Нажмите кнопку "Подписаться"
3. Компания появится в разделе "Partnerships"

### Отправка письма
1. В разделе "Partnerships" найдите нужную компанию
2. Нажмите "Написать письмо"
3. Откроется почтовый клиент с предзаполненным письмом

### Приглашение в проект
1. В разделе "Partnerships" найдите нужную компанию
2. Нажмите "Пригласить в проект"
3. Выберите проект из списка
4. Добавьте дополнительное сообщение (опционально)
5. Нажмите "Отправить приглашение"
6. Откроется почтовый клиент с письмом-приглашением

## 5. Структура письма-приглашения

Письмо-приглашение содержит:
- Название проекта
- Описание проекта
- Бюджет проекта
- Локацию проекта
- Дополнительное сообщение (если указано)
- Прямую ссылку на проект

## 6. Требования

- Пользователь должен быть авторизован
- У пользователя должны быть созданы проекты для функции приглашений
- Почтовый клиент должен быть настроен на устройстве пользователя