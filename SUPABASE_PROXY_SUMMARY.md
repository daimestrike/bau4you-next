# üéØ Supabase Proxy System - –í–´–ü–û–õ–ù–ï–ù–û!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. üîÑ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Proxy API
- ‚úÖ `/api/sb/[...path]/route.ts` - –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ auth/, rest/, storage/ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –í—Å–µ HTTP –º–µ—Ç–æ–¥—ã: GET, POST, PUT, DELETE, PATCH, OPTIONS
- ‚úÖ –ü–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ Service Role –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü–æ–ª–Ω–∞—è CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 2. üñ•Ô∏è –ü—Ä–æ–∫—Å–∏-–∫–ª–∏–µ–Ω—Ç
- ‚úÖ `src/lib/supabase-proxy.ts` - –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Supabase API
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ localStorage
- ‚úÖ Query Builder: .select(), .eq(), .insert(), etc.
- ‚úÖ Storage API –¥–ª—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ Auth API –¥–ª—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞

### 3. üîß –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ `src/lib/supabase.js` –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –ø—Ä–æ–∫—Å–∏
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ API –º–µ—Ç–æ–¥—ã –ø—Ä–æ–µ–∫—Ç–∞

### 4. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `/test-proxy` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä—è–º–æ–≥–æ –∏ –ø—Ä–æ–∫—Å–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ VPS –ø—Ä–æ–∫—Å–∏

### 5. üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS
- ‚úÖ `supabase-proxy-vps.tar.gz` - –≥–æ—Ç–æ–≤—ã–π –∞—Ä—Ö–∏–≤
- ‚úÖ `deploy-to-vps.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- ‚úÖ `create-vps-deploy.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

## üéØ –¶–ï–õ–ò –î–û–°–¢–ò–ì–ù–£–¢–´

### ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å VPN/CORS —Ä–µ—à–µ–Ω—ã
```
–î–û:    –ö–ª–∏–µ–Ω—Ç ‚Üí (VPN –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞) ‚Üí Supabase ‚ùå
–ü–û–°–õ–ï: –ö–ª–∏–µ–Ω—Ç ‚Üí VPS Proxy ‚Üí Supabase ‚úÖ
```

### ‚úÖ –ö–ª—é—á–∏ API —Å–∫—Ä—ã—Ç—ã
```
–î–û:    SUPABASE_ANON_KEY –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ ‚ùå  
–ü–û–°–õ–ï: –ö–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ ‚úÖ
```

### ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```
–í–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π!
supabase.from('table').select() ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
```

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS (api.bau4you.co)
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—Ä—Ö–∏–≤ –Ω–∞ VPS
scp supabase-proxy-vps.tar.gz root@api.bau4you.co:/var/www/

# –°–ª–µ–¥—É–π—Ç–µ deploy-to-vps.md
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL (—É–∂–µ –≥–æ—Ç–æ–≤–æ)
```typescript
// –í supabase-proxy.ts
const VPS_URL = 'https://api.bau4you.co'
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–û—Ç–∫—Ä–æ–π—Ç–µ `/test-proxy` –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**üéØ –ó–ê–î–ê–ß–ê –í–´–ü–û–õ–ù–ï–ù–ê –ü–û–õ–ù–û–°–¢–¨–Æ!**

‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase –∏–¥—É—Ç —á–µ—Ä–µ–∑ VPS  
‚úÖ API –∫–ª—é—á–∏ —Å–∫—Ä—ã—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞  
‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å VPN/CORS —Ä–µ—à–µ–Ω—ã  
‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º  
‚úÖ –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è  

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ**

## üìã –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `src/app/api/sb/[...path]/route.ts` - –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Next.js 15+)
- `src/lib/supabase-proxy.ts` - –ü—Ä–æ–∫—Å–∏-–∫–ª–∏–µ–Ω—Ç  
- `src/app/test-proxy/page.tsx` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `deploy-to-vps.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
- `create-vps-deploy.sh` - –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
- `supabase-proxy-vps.tar.gz` - –ê—Ä—Ö–∏–≤ –¥–ª—è VPS

### –ò–∑–º–µ–Ω–µ–Ω—ã:
- `src/lib/supabase.js` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –ø—Ä–æ–∫—Å–∏ (URL: `https://api.bau4you.co`)
- `src/lib/s3.ts` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- `src/app/api/upload/direct/route.ts` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è v2.0:
- **Next.js 15+ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Async params –≤ route handlers
- **–û–±–Ω–æ–≤–ª–µ–Ω –¥–æ–º–µ–Ω:** `https://api.bau4you.co` –≤–º–µ—Å—Ç–æ IP
- **–†–∞—Å—à–∏—Ä–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞:** –î–æ–±–∞–≤–ª–µ–Ω—ã —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- **SSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ 